import"./style-CuMWhqag.js";import"./footer-DqjFuR03.js";import{a as i,c as f,d as c,g as m,b as v,e as g}from"./firebaseConfig-cEQ9fNQE.js";const L=document.getElementById("clearAllButton");L.addEventListener("click",async()=>{const t=i.currentUser;if(!t){alert("You must be logged in.");return}const e=t.uid;if(confirm("Are you sure you want to clear ALL leftovers? This will return them to your swiping pool."))try{const r=f(c,"users",e,"leftovers"),s=await m(r),o=[];s.forEach(d=>{const a=v(c,"users",e,"leftovers",d.id);o.push(g(a))}),await Promise.all(o),document.getElementById("LeftoversContainer").innerHTML="",console.log("All leftovers removed successfully.")}catch(r){console.error("Error clearing leftovers:",r)}});async function E(){i.onAuthStateChanged(async t=>{const e=document.getElementById("Leftovers"),r=document.getElementById("LeftoversContainer");if(!e){console.error("Template element #Leftovers not found");return}if(!r){console.error("Container element #LeftoversContainer not found");return}const s=t?t.uid:"guestUser";try{const o=f(c,"users",s,"leftovers");(await m(o)).forEach(a=>{const l=a.data(),y=l.name||"Unnamed",p=l.rating||"N/A",h=l.address||"N/A",n=e.content.cloneNode(!0),u=n.querySelector(".LeftoverCard");n.querySelector(".LeftoverName").textContent=y,n.querySelector(".LeftoverReview").textContent=p+"â˜…",n.querySelector(".LeftoverAddress").textContent=h,n.querySelector(".delButton").addEventListener("click",async()=>{try{await g(v(c,"users",s,"leftovers",a.id)),u.remove()}catch(C){console.error("Error deleting item:",C)}}),r.appendChild(u)})}catch(o){console.error("Error loading leftovers:",o)}})}document.addEventListener("click",t=>{const e=t.target.closest(".dropdownBtn");e&&e.nextElementSibling.classList.toggle("hidden")});E();
