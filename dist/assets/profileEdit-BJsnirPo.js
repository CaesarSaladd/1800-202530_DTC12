import"./style-DUvkK9um.js";import{o as i,b as l,d as u,i as m,a as c,j as f,u as g}from"./firebaseConfig-cEQ9fNQE.js";import"./footer-DqjFuR03.js";import"./loggedIn-CFsZh-j_.js";document.addEventListener("DOMContentLoaded",()=>{const r=document.getElementById("personalInfoFields"),o=document.getElementById("editButton"),s=document.getElementById("saveButton"),t=document.getElementById("nameInput");s.disabled=!0,i(c,async a=>{if(!a)return console.log("No user signed in");try{const e=l(u,"users",a.uid),n=await m(e);if(!n.exists())return console.log("User document not found");const d=n.data().name||a.displayName||"";t.value=d,t.placeholder=d||"Enter username"}catch(e){console.error("Error loading name:",e)}}),o.addEventListener("click",()=>{r.disabled=!1,o.disabled=!0,s.disabled=!1,t.focus(),t.setSelectionRange(t.value.length,t.value.length)}),s.addEventListener("click",async()=>{const a=c.currentUser;if(!a){alert("Please log in first.");return}const e=t.value.trim();if(!e){alert("Name cannot be empty.");return}try{const n=l(u,"users",a.uid);await f(n,{name:e}),await g(a,{displayName:e}),console.log("Name successfully updated:",e),alert(`Username successfully updated to "${e}"!`),r.disabled=!0,o.disabled=!1,s.disabled=!0}catch(n){console.error("Error saving name:",n),alert("Could not save name: "+n.message)}})});
