import"./style-DUvkK9um.js";import{s as v,f as L,u as S,h as b,b as B,d as I,a as E}from"./firebaseConfig-cEQ9fNQE.js";import"./bootstrap.esm-Cguh7NES.js";import"./app-BRg3wZ-2.js";async function P(t,n){return v(E,t,n)}async function q(t,n,a){const s=(await L(E,n,a)).user;await S(s,{displayName:t});try{await b(B(I,"users",s.uid),{name:t,email:n,country:"Canada",school:"BCIT"}),console.log("Firestore user document created successfully!")}catch(i){console.error("Error creating user document in Firestore:",i)}return s}function h(t){const n=(t?.code||"").toLowerCase();return{"auth/invalid-credential":"Wrong email or password.","auth/invalid-email":"Please enter a valid email address.","auth/user-not-found":"No account found with that email.","auth/wrong-password":"Incorrect password.","auth/too-many-requests":"Too many attempts. Try again later.","auth/email-already-in-use":"Email is already in use.","auth/weak-password":"Password too weak (min 6 characters).","auth/missing-password":"Password cannot be empty.","auth/network-request-failed":"Network error. Try again."}[n]||"Something went wrong. Please try again."}function C(){const t=document.getElementById("authAlert"),n=document.getElementById("loginView"),a=document.getElementById("signupView"),p=document.getElementById("toSignup"),s=document.getElementById("toLogin"),i=document.getElementById("loginForm"),g=document.getElementById("signupForm"),f="./search.html";function c(e,r){e.classList.toggle("d-none",!r)}let y;function d(e){t.textContent=e||"",t.classList.remove("d-none"),clearTimeout(y),y=setTimeout(u,5e3)}function u(){t.classList.add("d-none"),t.textContent="",clearTimeout(y)}function m(e,r){const o=e?.querySelector('[type="submit"]');o&&(o.disabled=r)}p?.addEventListener("click",e=>{e.preventDefault(),u(),c(n,!1),c(a,!0),a?.querySelector("input")?.focus()}),s?.addEventListener("click",e=>{e.preventDefault(),u(),c(a,!1),c(n,!0),n?.querySelector("input")?.focus()}),i?.addEventListener("submit",async e=>{e.preventDefault(),u();const r=document.querySelector("#loginEmail")?.value?.trim()??"",o=document.querySelector("#loginPassword")?.value??"";if(!r||!o){d("Please enter your email and password.");return}m(i,!0);try{await P(r,o),location.href=f}catch(l){d(h(l)),console.error(l)}finally{m(i,!1)}}),g?.addEventListener("submit",async e=>{e.preventDefault(),u();const r=document.querySelector("#signupName")?.value?.trim()??"",o=document.querySelector("#signupEmail")?.value?.trim()??"",l=document.querySelector("#signupPassword")?.value??"";if(!r||!o||!l){d("Please ensure all fields are filled.");return}m(g,!0);try{await q(r,o,l),location.href=f}catch(w){d(h(w)),console.error(w)}finally{m(g,!1)}})}document.addEventListener("DOMContentLoaded",C);
