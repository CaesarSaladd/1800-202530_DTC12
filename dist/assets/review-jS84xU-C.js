import"./style-DUvkK9um.js";import{a as d,b as u,d as o,i as l,k as w,c as p,l as v}from"./firebaseConfig-cEQ9fNQE.js";import"./footer-DqjFuR03.js";import"./app-BRg3wZ-2.js";import"./bootstrap.esm-Cguh7NES.js";var c=localStorage.getItem("restaurantDocID");d.onAuthStateChanged(t=>{t?D(c,t.uid):console.error("User not logged in")});async function D(t,r){try{const e=u(o,"users",r,"craves",t),n=await l(e);if(n.exists()){const a=n.data().name;document.getElementById("restaurantName").textContent=a}else console.log("No such restaurant found!")}catch(e){console.error("Error getting restaurant document:",e)}}document.addEventListener("DOMContentLoaded",()=>{m()});let s=0;function m(){const t=document.querySelectorAll(".star");t.forEach((r,e)=>{r.addEventListener("click",()=>{t.forEach((n,a)=>{n.textContent=a<=e?"star":"star_outline"}),s=e+1,console.log("Current rating:",s)})})}async function E(){console.log("Inside write review");const t=document.getElementById("description").value;if(console.log("inside write review, rating =",s),!t){alert("Please complete all required fields.");return}const r=d.currentUser;if(r)try{const e=r.uid,n=u(o,"users",e,"craves",c),a=await l(n);if(!a.exists()){console.error("Restaurant data not found.");return}const i=a.data(),g=i.name,f=i.address;await w(p(o,"users",e,"reviews"),{restaurantDocID:c,restaurantName:g,restaurantAddress:f,userID:e,description:t,rating:s,timestamp:v()}),console.log("Review successfully written!"),window.location.href="profile.html"}catch(e){console.error("Error adding review:",e)}else console.log("No user is signed in")}document.addEventListener("DOMContentLoaded",()=>{m(),document.getElementById("submitBtn").addEventListener("click",E),document.getElementById("cancelBtn").addEventListener("click",()=>{window.location.href="profile.html"})});
